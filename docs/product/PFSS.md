# 私人文件存储服务

私人文件存储服务是一个可以单独运行的文件存储服务，可以用于存储和管理个人的文件，主要面向开发者或者中小企业，可独立部署。旨在为小型企业或者开发者提供一个安全的、可集中管理文件的系统。它包含文件的上传、预览、下载、删除等功能。

## 功能

- 文件上传
- 文件预览
- 文件下载
- 文件夹管理
- 文件管理

### 文件上传

文件上传是 PFSS 的输入模块之一，用户（开发者）可以通过调用 API 接口来实现文件的上传。它还支持定制的文件名、文件夹路径等参数。默认情况下，文件会被存储在服务器的`/files`目录下，返回计算后的文件路径，且文件名会通过 SHA256 哈希算法进行处理，以确保文件的唯一性。如果用户选择通过一些格式自定义（时间戳、文件名等）的文件名、文件夹路径等参数，PFSS 会根据用户的选择来存储文件。

### 文件预览

文件预览是 PFSS 的输出模块之一，在 Web 端可以通过使用链接的方式直接预览文件。

### 文件下载

文件下载是 PFSS 的输出模块之一，用户（开发者）可以通过调用 API 接口来实现文件的下载。

### 文件管理

PFSS 提供一些接口，方便用户获取文件列表、支持对文件的删除、修改、查找等操作。除此之外，PFSS 会提供一个默认的文件管理界面，使用者可独立部署，以实现文件的管理。

### 文件夹管理

在 PFSS 中，文件是默认存储在`/files`目录下的，但是 PFSS 也支持自定义的文件夹路径。使用者可以在上传文件时，通过自行设置一个文件夹参数来指定文件的存储位置。

## 基本概念

- 私有上传：文件的上传仅仅支持私有上传，不支持公开上传，主要通过 key 机制管理访问权限
- 公开访问：所有上传的文件默认都是公开访问的
- 文件：用户上传的文件
- 文件夹：用户自定义的文件夹路径

## 信息结构

### 私有上传

```typescript
interface PrivateUpload {
  secretKey: string;
  file: File;
  customNameType?: "time" | "filename" | "hash";
  customFolder?: string;
}
```

### 公开访问

```html
<a href="filePath">文件名</a>
```

## 文件

```typescript
interface File {
  id: string;
  name: string;
  path: string;
  folder: string;
  size: number;
  type: string;
  lastModified: number;
}
```

### 文件夹

```typescript
interface Folder {
  id: string;
  name: string;
  fileIds: File.id[];
}
```
